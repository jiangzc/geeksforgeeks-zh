<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-x-mtfrom-en"><head><meta http-equiv="X-Translated-By" content="Google"><link href="https://apachecn.github.io/geeksforgeeks-zh/docs/en/os/68.html" hreflang="en" rel="alternate machine-translated-from"><title></title><link href="../../../styles/ebook.css" type="text/css" rel="stylesheet"></head><body><header class="entry-header"><h1 class="entry-title"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x94F6;&#x884C;&#x5BB6;&#x7B97;&#x6CD5;&#xFF1A;&#x6253;&#x5370;&#x6240;&#x6709;&#x5B89;&#x5168;&#x72B6;&#x6001;&#xFF08;&#x6216;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#xFF09;</span> </h1></header><!-- .entry-header --><div class="entry-content"><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5148;&#x51B3;&#x6761;&#x4EF6; - <a href="https://www.geeksforgeeks.org/operating-system-resource-allocation-graph-rag/" rel="noopener" target="_blank">&#x8D44;&#x6E90;&#x5206;&#x914D;&#x56FE;&#xFF08;RAG&#xFF09;</a> &#xFF0C; <a href="https://www.geeksforgeeks.org/operating-system-bankers-algorithm/" rel="noopener" target="_blank">&#x94F6;&#x884C;&#x5BB6;&#x7B97;&#x6CD5;</a> &#xFF0C; <a href="https://www.geeksforgeeks.org/operating-system-bankers-algorithm/" rel="noopener" target="_blank">&#x94F6;&#x884C;&#x5BB6;&#x7B97;&#x6CD5;</a> <a href="https://www.geeksforgeeks.org/program-bankers-algorithm-set-1-safety-algorithm/" rel="noopener" target="_blank">&#x7A0B;&#x5E8F;</a></span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> Banker&#x7B97;&#x6CD5;&#x662F;&#x4E00;&#x79CD;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x548C;&#x6B7B;&#x9501;&#x907F;&#x514D;&#x7B97;&#x6CD5;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8BE5;&#x7B97;&#x6CD5;&#x6D4B;&#x8BD5;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x6A21;&#x62DF;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x7684;&#x9884;&#x5B9A;&#x6700;&#x5927;&#x53EF;&#x80FD;&#x91CF;&#x7684;&#x5206;&#x914D;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x7EE7;&#x7EED;&#x5206;&#x914D;&#x4E4B;&#x524D;&#x8FDB;&#x884C;&#x201C;s&#x72B6;&#x6001;&#x201D;&#x68C0;&#x67E5;&#x4EE5;&#x6D4B;&#x8BD5;&#x53EF;&#x80FD;&#x7684;&#x6D3B;&#x52A8;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x5B83;&#x68C0;&#x67E5;&#x4EFB;&#x4F55;&#x8D44;&#x6E90;&#x7684;&#x5206;&#x914D;&#x662F;&#x5426;&#x4F1A;&#x5BFC;&#x81F4;&#x6B7B;&#x9501;&#xFF0C;OR&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x5C06;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x7ED9;&#x8FDB;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x5219;&#x8D44;&#x6E90;&#x4E0D;&#x4F1A;&#x5206;&#x914D;&#x7ED9;&#x8BE5;&#x8FDB;&#x7A0B;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x786E;&#x5B9A;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#xFF08;&#x5373;&#x4F7F;&#x53EA;&#x6709;1&#xFF09;&#x5C06;&#x786E;&#x4FDD;&#x7CFB;&#x7EDF;&#x4E0D;&#x4F1A;&#x9677;&#x5165;&#x6B7B;&#x9501;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x94F6;&#x884C;&#x5BB6;&#x7684;&#x7B97;&#x6CD5;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x67E5;&#x627E;&#x662F;&#x5426;&#x5B58;&#x5728;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x786E;&#x5B9A;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#x7684;&#x603B;&#x6570;&#x5E76;&#x6253;&#x5370;&#x6240;&#x6709;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#xFF1A;</span> </p><ul><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x53EF;&#x7528;&#x7684;&#x77E2;&#x91CF;</span> </li><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x6700;&#x5927;&#x77E9;&#x9635;</span> </li><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5206;&#x914D;&#x77E9;&#x9635;</span> </li><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x9700;&#x8981;&#x77E9;&#x9635;</span> </li></ul><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4F8B;&#xFF1A;</span> </p><pre> <span class="pre-span" style="direction: ltr; text-align: left">Input :</span>  
<img src="../../../imgs/os/e04dba56807f51fd48800238a868e8f0.jpg" alt="" width="464" height="57" class="alignnone size-full wp-image-289749"> 
<img src="../../../imgs/os/0327c9b5da99b4f74bdf45681e500e99.jpg" alt="" width="577" height="187" class="alignnone size-full wp-image-288942">

<span class="pre-span" style="direction: ltr; text-align: left">Output : Safe sequences are:</span>
<span class="pre-span" style="direction: ltr; text-align: left">P2--&gt; P4--&gt; P1--&gt; P3</span>
<span class="pre-span" style="direction: ltr; text-align: left">P2--&gt; P4--&gt; P3--&gt; P1</span>
<span class="pre-span" style="direction: ltr; text-align: left">P4--&gt; P2--&gt; P1--&gt; P3</span>
<span class="pre-span" style="direction: ltr; text-align: left">P4--&gt; P2--&gt; P3--&gt; P1</span>

<span class="pre-span" style="direction: ltr; text-align: left">There are total 4 safe-sequences</span>
</pre><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <b>&#x8BF4;&#x660E; - </b></span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x603B;&#x8D44;&#x6E90;&#x4E3A;R1 = 10&#xFF0C;R2 = 5&#xFF0C;R3 = 7&#xFF0C;&#x5206;&#x914D;&#x7684;&#x8D44;&#x6E90;&#x4E3A;R1 =&#xFF08;0 + 2 + 3 + 2 =&#xFF09;7&#xFF0C;R2 =&#xFF08;1 + 0 + 0 + 1 =&#xFF09;2&#xFF0C;R3 =&#xFF08;0 + 0 + 2 + 1 =&#xFF09;3&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5269;&#x4F59;&#x8D44;&#x6E90;&#x662F;R1 =&#xFF08;10  -  7 =&#xFF09;3&#xFF0C;R2 =&#xFF08;5  -  2 =&#xFF09;3&#xFF0C;R3 =&#xFF08;7  -  3 =&#xFF09;4&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5269;&#x4F59;&#x53EF;&#x7528;=&#x603B;&#x8D44;&#x6E90; - &#x5206;&#x914D;&#x7684;&#x8D44;&#x6E90;</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x548C;</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5269;&#x4F59;&#x9700;&#x6C42;=&#x6700;&#x5927; - &#x5206;&#x914D;</span> </p><p><img src="../../../imgs/os/22ae60752f6df56f11d1e7fd2dd6f9c0.jpg" alt="" width="639" height="138" class="aligncenter size-full wp-image-293832"></p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;P2&#x6216;P4&#x5F00;&#x59CB;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5728;Banker&#x7B97;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x6216;&#x7B2C;&#x4E8C;&#x6B21;&#x5C1D;&#x8BD5;&#x6B65;&#x9AA4;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;P1&#x6216;P3&#x7684;&#x53EF;&#x7528;&#x8D44;&#x6E90;&#x7684;&#x5269;&#x4F59;&#x9700;&#x6C42;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x53EA;&#x6709;&#x56DB;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x5B89;&#x5168;&#x5E8F;&#x5217;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8FD9;&#x4E9B;&#x662F; &#xFF1A;</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> P2-&gt; P4-&gt; P1-&gt; P3</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> P2-&gt; P4-&gt; P3-&gt; P1</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> P4-&gt; P2-&gt; P1-&gt; P3</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> P4-&gt; P2-&gt; P3-&gt; P1</span> </p><p><!-- To show strongly recommend and practice link    --></p><div id="practiceLinkDiv"><h2 class="sigil_not_in_toc"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <a href="https://ide.geeksforgeeks.org/">&#x5EFA;&#x8BAE;&#xFF1A;&#x5728;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E4B;&#x524D;&#xFF0C;&#x8BF7;&#x5148;&#x5728;<b><i><u>{IDE}</u></i></b>&#x4E0A;&#x5C1D;&#x8BD5;&#x60A8;&#x7684;&#x65B9;&#x6CD5;&#x3002;</a></span> </h2></div><br><!-- post_top_responsive --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="4501693235" data-ad-format="auto"></ins><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4EE3;&#x7801; - </span> </p>
<pre class="brush: cpp; title: ; notranslate" title="">// CPP Program to Print all possible safe sequences using banker&apos;s algorithm
#include &lt;iostream&gt;
#include &lt;string.h&gt;
#include &lt;vector&gt;
// total number of process
#define P 4
// total number of resources
#define R 3

// total safe-sequences
int total = 0;

using namespace std;

// function to check if process
// can be allocated or not
bool is_available(int process_id, int allocated[][R],
                  int max[][R], int need[][R], int available[])
{

    bool flag = true;

    // check if all the available resources
    // are less greater than need of process
    for (int i = 0; i &lt; R; i++) {

        if (need[process_id][i] &gt; available[i])
            flag = false;
    }

    return flag;
}

// Print all the safe-sequences
void safe_sequence(bool marked[], int allocated[][R], int max[][R],
                   int need[][R], int available[], vector&lt;int&gt; safe)
{

    for (int i = 0; i &lt; P; i++) {

        // check if it is not marked
        // already and can be allocated
        if (!marked[i] &amp;&amp; is_available(i, allocated, max, need, available)) {

            // mark the process
            marked[i] = true;

            // increase the available
            // by deallocating from process i
            for (int j = 0; j &lt; R; j++)
                available[j] += allocated[i][j];

            safe.push_back(i);
            // find safe sequence by taking process i
            safe_sequence(marked, allocated, max, need, available, safe);
            safe.pop_back();

            // unmark the process
            marked[i] = false;

            // decrease the available
            for (int j = 0; j &lt; R; j++)
                available[j] -= allocated[i][j];
        }
    }

    // if a safe-sequence is found, display it
    if (safe.size() == P) {

        total++;
        for (int i = 0; i &lt; P; i++) {

            cout &lt;&lt; &quot;P&quot; &lt;&lt; safe[i] + 1;
            if (i != (P - 1))
                cout &lt;&lt; &quot;--&gt; &quot;;
        }

        cout &lt;&lt; endl;
    }
}

// Driver Code
int main()
{

    // allocated matrix of size P*R
    int allocated[P][R] = { { 0, 1, 0 },
                            { 2, 0, 0 },
                            { 3, 0, 2 },
                            { 2, 1, 1 } };

    // max matrix of size P*R
    int max[P][R] = { { 7, 5, 3 },
                      { 3, 2, 2 },
                      { 9, 0, 2 },
                      { 2, 2, 2 } };

    // Initial total resources
    int resources[R] = { 10, 5, 7 };

    // available vector of size R
    int available[R];

    for (int i = 0; i &lt; R; i++) {

        int sum = 0;
        for (int j = 0; j &lt; P; j++)
            sum += allocated[j][i];

        available[i] = resources[i] - sum;
    }

    // safe vector for displaying a safe-sequence
    vector&lt;int&gt; safe;

    // marked of size P for marking allocated process
    bool marked[P];
    memset(marked, false, sizeof(marked));

    // need matrix of size P*R
    int need[P][R];
    for (int i = 0; i &lt; P; i++)
        for (int j = 0; j &lt; R; j++)
            need[i][j] = max[i][j] - allocated[i][j];

    cout &lt;&lt; &quot;Safe sequences are:&quot; &lt;&lt; endl;
    safe_sequence(marked, allocated, max, need, available, safe);

    cout &lt;&lt; &quot;\nThere are total &quot; &lt;&lt; total &lt;&lt; &quot; safe-sequences&quot; &lt;&lt; endl;
    return 0;
}
</pre><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8F93;&#x51FA;&#xFF1A;</span> </p><pre> <span class="pre-span" style="direction: ltr; text-align: left">Safe sequences are:</span>
<span class="pre-span" style="direction: ltr; text-align: left">P2--&gt; P4--&gt; P1--&gt; P3</span>
<span class="pre-span" style="direction: ltr; text-align: left">P2--&gt; P4--&gt; P3--&gt; P1</span>
<span class="pre-span" style="direction: ltr; text-align: left">P4--&gt; P2--&gt; P1--&gt; P3</span>
<span class="pre-span" style="direction: ltr; text-align: left">P4--&gt; P2--&gt; P3--&gt; P1</span>

<span class="pre-span" style="direction: ltr; text-align: left">There are total 4 safe-sequences</span>
</pre><br><!-- post_bottom_responsive --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="8385097921" data-ad-format="auto"></ins><br><br><hr><hr><!-- .entry-meta --></div></body></html>