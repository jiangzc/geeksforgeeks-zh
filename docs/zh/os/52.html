<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-x-mtfrom-en"><head><meta http-equiv="X-Translated-By" content="Google"><link href="https://apachecn.github.io/geeksforgeeks-zh/docs/en/os/52.html" hreflang="en" rel="alternate machine-translated-from"><title></title><link href="../../../styles/ebook.css" type="text/css" rel="stylesheet"></head><body><header class="entry-header"><h1 class="entry-title"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> Dekker&#x7684;&#x7B97;&#x6CD5;</span> </h1></header><!-- .entry-header --><div class="entry-content"><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5148;&#x51B3;&#x6761;&#x4EF6; - <a href="https://www.geeksforgeeks.org/process-synchronization-set-1/" rel="noopener" target="_blank">&#x8FDB;&#x7A0B;&#x540C;&#x6B65;</a> &#xFF0C; <a href="https://www.geeksforgeeks.org/inter-process-communication/" rel="noopener" target="_blank">&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</a></span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4E3A;&#x4E86;&#x83B7;&#x5F97;&#x8FD9;&#x6837;&#x7684;&#x4E92;&#x65A5;&#xFF0C;&#x6709;&#x9650;&#x7684;&#x7B49;&#x5F85;&#x548C;&#x8FDB;&#x6B65;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x51E0;&#x79CD;&#x7B97;&#x6CD5;&#xFF0C;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#x662F;Dekker&#x7684;&#x7B97;&#x6CD5;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8981;&#x7406;&#x89E3;&#x8BE5;&#x7B97;&#x6CD5;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x4E86;&#x89E3;&#x4E34;&#x754C;&#x533A;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x6D41;&#x7A0B;&#x901A;&#x5E38;&#x8868;&#x793A;&#x4E3A;&#xFF1A;</span> </p><pre> <span class="pre-span" style="direction: ltr; text-align: left">do {</span>
    <span class="pre-span" style="direction: ltr; text-align: left">//entry section</span>
        <span class="pre-span" style="direction: ltr; text-align: left">critical section</span>
    <span class="pre-span" style="direction: ltr; text-align: left">//exit section</span>
        <span class="pre-span" style="direction: ltr; text-align: left">remainder section</span>
<span class="pre-span" style="direction: ltr; text-align: left">} while (TRUE);</span>
</pre><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5173;&#x952E;&#x90E8;&#x5206;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x5FC5;&#x987B;&#x786E;&#x4FDD;&#x9075;&#x5FAA;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x6761;&#x4EF6;&#xFF1A;</span> </p><ol><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x76F8;&#x4E92;&#x6392;&#x65A5;</span> </li><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8FDB;&#x5C55;</span> </li><li> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x6709;&#x754C;&#x7B49;&#x5F85;</span> </li></ol><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <a href="https://www.geeksforgeeks.org/petersons-algorithm-for-mutual-exclusion-set-1/">Peterson&#x7684;&#x89E3;&#x51B3;</a>&#x65B9;&#x6848;&#x662F;&#x786E;&#x4FDD;&#x6240;&#x6709;&#x56E0;&#x7D20;<a href="https://www.geeksforgeeks.org/petersons-algorithm-for-mutual-exclusion-set-1/">&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E4B;&#x4E00;</a> &#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x53E6;&#x4E00;&#x4E2A;&#x662F;<b>Dekker&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;</b> &#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> Dekker&#x7684;&#x7B97;&#x6CD5;&#x662F;&#x5173;&#x952E;&#x90E8;&#x5206;&#x95EE;&#x9898;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53EF;&#x8BC1;&#x660E;&#x6B63;&#x786E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5B83;&#x5141;&#x8BB8;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x4E00;&#x6B21;&#x6027;&#x8D44;&#x6E90;&#x800C;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#xFF0C;&#x4EC5;&#x4F7F;&#x7528;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5B83;&#x907F;&#x514D;&#x4E86;&#x5929;&#x771F;&#x7684;&#x8F6E;&#x6D41;&#x7B97;&#x6CD5;&#x7684;&#x4E25;&#x683C;&#x4EA4;&#x66FF;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x6700;&#x5148;&#x53D1;&#x660E;&#x7684;&#x4E92;&#x65A5;&#x7B97;&#x6CD5;&#x4E4B;&#x4E00;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x867D;&#x7136;Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x6709;&#x5F88;&#x591A;&#x7248;&#x672C;&#xFF0C;&#x4F46;&#x6700;&#x7EC8;&#x7248;&#x672C;&#x6216;&#x7B2C;5&#x7248;&#x672C;&#x662F;&#x6EE1;&#x8DB3;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x6700;&#x6709;&#x6548;&#x7684;&#x7248;&#x672C;&#x3002;</span> </p><br><!-- post_top_responsive --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="4501693235" data-ad-format="auto"></ins><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <b>&#x6CE8; -</b>&#x6B64;&#x5904;&#x63D0;&#x5230;&#x7684;Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4EC5;&#x786E;&#x4FDD;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x65A5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6B63;&#x786E;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x548C;&#x53D8;&#x91CF;&#x5C06;&#x5176;&#x6269;&#x5C55;&#x5230;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x8FDB;&#x7A0B;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <b>&#x7B97;&#x6CD5; -</b>&#x5B83;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#x6570;&#x7EC4;&#x548C;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x53D8;&#x91CF;&#xFF1A;</span> </p><pre> <span class="pre-span" style="direction: ltr; text-align: left">var flag: array [0..1] of boolean;</span>
<span class="pre-span" style="direction: ltr; text-align: left">turn: 0..1;</span>
<span class="pre-span" style="direction: ltr; text-align: left">repeat</span>

        <span class="pre-span" style="direction: ltr; text-align: left">flag[i] := true;</span>
        <span class="pre-span" style="direction: ltr; text-align: left">while flag[j] do</span>
                <span class="pre-span" style="direction: ltr; text-align: left">if turn = j then</span>
                <span class="pre-span" style="direction: ltr; text-align: left">begin</span>
                        <span class="pre-span" style="direction: ltr; text-align: left">flag[i] := false;</span>
                        <span class="pre-span" style="direction: ltr; text-align: left">while turn = j do no-op;</span>
                        <span class="pre-span" style="direction: ltr; text-align: left">flag[i] := true;</span>
                <span class="pre-span" style="direction: ltr; text-align: left">end;</span>

                <span class="pre-span" style="direction: ltr; text-align: left">critical section</span>

        <span class="pre-span" style="direction: ltr; text-align: left">turn := j;</span>
        <span class="pre-span" style="direction: ltr; text-align: left">flag[i] := false;</span>

                <span class="pre-span" style="direction: ltr; text-align: left">remainder section</span>

<span class="pre-span" style="direction: ltr; text-align: left">until false;</span>
</pre><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <strong>Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x7B2C;&#x4E00;&#x7248; -</strong>&#x60F3;&#x6CD5;&#x662F;&#x5728;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x516C;&#x5171;&#x6216;&#x5171;&#x4EAB;&#x7EBF;&#x7A0B;&#x53F7;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x5171;&#x4EAB;&#x7EBF;&#x7A0B;&#x6307;&#x793A;&#x524D;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x8FD0;&#x884C;&#xFF0C;&#x5219;&#x963B;&#x6B62;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#x8FDB;&#x5165;&#x5176;&#x5173;&#x952E;&#x90E8;&#x5206;&#x3002;</span> </p><div class="noIdeBtnDiv">
<pre class="brush: cpp; title: ; notranslate" title="">Main()
{

    int thread_number = 1;
    startThreads();
}

Thread1()
{
    do {

        // entry section
        // wait until threadnumber is 1
        while (threadnumber == 2)
            ;

        // critical section

        // exit section
        // give access to the other thread
        threadnumber = 2;

        // remainder section

    } while (completed == false)
}

Thread2()
{

    do {

        // entry section
        // wait until threadnumber is 2
        while (threadnumber == 1)
            ;

        // critical section

        // exit section
        // give access to the other thread
        threadnumber = 1;

        // remainder section

    } while (completed == false)
}
</pre></div><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4E0A;&#x8FF0;&#x5B9E;&#x73B0;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x662F;&#x9501;&#x6B65;&#x540C;&#x6B65;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x8D56;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5982;&#x679C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x7B2C;&#x4E8C;&#x4E2A;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#xFF0C;&#x63D0;&#x4F9B;&#x5BF9;&#x5DF2;&#x5B8C;&#x6210;&#x7684;&#x8FDB;&#x7A0B;&#x7684;&#x8BBF;&#x95EE;&#x5E76;&#x7B49;&#x5F85;&#x8F6E;&#x5230;&#x5B83;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF0C;&#x5E76;&#x4E14;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x8FD0;&#x884C;&#x4EE5;&#x5C06;&#x8BBF;&#x95EE;&#x6743;&#x8FD4;&#x56DE;&#x7ED9;&#x540E;&#x8005;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x56E0;&#x6B64;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x8FC7;&#x7A0B;&#x65E0;&#x9650;&#x671F;&#x5730;&#x7B49;&#x5F85;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <strong>Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x7B2C;&#x4E8C;&#x7248; -</strong>&#x8981;&#x5220;&#x9664;&#x9501;&#x6B65;&#x540C;&#x6B65;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x6807;&#x5FD7;&#x6765;&#x6307;&#x793A;&#x5176;&#x5F53;&#x524D;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5728;&#x5165;&#x53E3;&#x548C;&#x51FA;&#x53E3;&#x90E8;&#x5206;&#x76F8;&#x5E94;&#x5730;&#x66F4;&#x65B0;&#x5B83;&#x4EEC;&#x3002;</span> </p><div class="noIdeBtnDiv"><pre class="brush: cpp; title: ; notranslate" title="">Main()
{

    // flags to indicate if each thread is in
    // its critial section or not.
    boolean thread1 = false;
    boolean thread2 = false;

    startThreads();
}

Thread1()
{

    do {

        // entry section
        // wait until thread2 is in its critical section
        while (thread2 == true)
            ;

        // indicate thread1 entering its critical section
        thread1 = true;

        // critical section

        // exit section
        // indicate thread1 exiting its critical section
        thread1 = false;

        // remainder section

    } while (completed == false)
}

Thread2()
{

    do {

        // entry section
        // wait until thread1 is in its critical section
        while (thread1 == true)
            ;

        // indicate thread2 entering its critical section
        thread2 = true;

        // critical section

        // exit section
        // indicate thread2 exiting its critical section
        thread2 = false;

        // remainder section

    } while (completed == false)
}
</pre></div><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4E0A;&#x8FF0;&#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x4E92;&#x65A5;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x5982;&#x679C;&#x5728;&#x6807;&#x5FD7;&#x66F4;&#x65B0;&#x671F;&#x95F4;&#xFF08;&#x5373;&#x5728;current_thread = true&#x671F;&#x95F4;&#xFF09;&#x7EBF;&#x7A0B;&#x88AB;&#x62A2;&#x5360;&#xFF08;&#x505C;&#x6B62;&#xFF09;&#xFF0C;&#x5219;&#x4E00;&#x65E6;&#x91CD;&#x7F6E;&#x4E86;&#x62A2;&#x5360;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x8FDB;&#x5165;&#x5176;&#x4E34;&#x754C;&#x533A;&#xFF0C;&#x5F53;&#x4E24;&#x4E2A;&#x6807;&#x5FD7;&#x90FD;&#x4E3A;&#x5047;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5F00;&#x59CB;&#x65F6;&#x89C2;&#x5BDF;&#x5230;&#x76F8;&#x540C;&#x7684;&#x7EBF;&#x7A0B;&#x3002; &#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <strong>Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x7B2C;&#x4E09;&#x7248; -</strong>&#x4E3A;&#x4E86;&#x91CD;&#x65B0;&#x786E;&#x4FDD;&#x4E92;&#x65A5;&#xFF0C;&#x5B83;&#x5728;&#x5165;&#x53E3;&#x90E8;&#x5206;&#x4E4B;&#x524D;&#x8BBE;&#x7F6E;&#x6807;&#x5FD7;&#x3002;</span> </p><div class="noIdeBtnDiv"><pre class="brush: cpp; title: ; notranslate" title="">Main()
{

    // flags to indicate if each thread is in
    // queue to enter its critical section
    boolean thread1wantstoenter = false;
    boolean thread2wantstoenter = false;

    startThreads();
}

Thread1()
{

    do {

        thread1wantstoenter = true;

        // entry section
        // wait until thread2 wants to enter
        // its critical section
        while (thread2wantstoenter == true)
            ;

        // critical section

        // exit section
        // indicate thread1 has completed
        // its critical section
        thread1wantstoenter = false;

        // remainder section

    } while (completed == false)
}

Thread2()
{

    do {

        thread2wantstoenter = true;

        // entry section
        // wait until thread1 wants to enter
        // its critical section
        while (thread1wantstoenter == true)
            ;

        // critical section

        // exit section
        // indicate thread2 has completed
        // its critical section
        thread2wantstoenter = false;

        // remainder section

    } while (completed == false)
}
</pre></div><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x95EE;&#x9898;&#x662F;&#x6B7B;&#x9501;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5C06;&#x5B83;&#x4EEC;&#x7684;&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;true&#xFF0C;&#x5E76;&#x4E14;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C06;&#x5728;&#x7A0D;&#x540E;&#x65E0;&#x9650;&#x671F;&#x7B49;&#x5F85;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <strong>Dekker&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x7B2C;&#x56DB;&#x7248; -</strong>&#x4F7F;&#x7528;&#x8F83;&#x5C0F;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x6765;&#x91CD;&#x65B0;&#x68C0;&#x67E5;&#x6761;&#x4EF6;&#xFF0C;&#x6D88;&#x9664;&#x6B7B;&#x9501;&#x5E76;&#x786E;&#x4FDD;&#x4E92;&#x65A5;&#x3002;</span> </p><div class="noIdeBtnDiv"><pre class="brush: cpp; title: ; notranslate" title="">Main()
{

    // flags to indicate if each thread is in
    // queue to enter its critical section
    boolean thread1wantstoenter = false;
    boolean thread2wantstoenter = false;

    startThreads();
}

Thread1()
{

    do {

        thread1wantstoenter = true;

        while (thread2wantstoenter == true) {

            // gives access to other thread
            // wait for random amount of time
            thread1wantstoenter = false;

            thread1wantstoenter = true;
        }

        // entry section
        // wait until thread2 wants to enter
        // its critical section

        // critical section

        // exit section
        // indicate thread1 has completed
        // its critical section
        thread1wantstoenter = false;

        // remainder section

    } while (completed == false)
}

Thread2()
{

    do {

        thread2wantstoenter = true;

        while (thread1wantstoenter == true) {

            // gives access to other thread
            // wait for random amount of time
            thread2wantstoenter = false;

            thread2wantstoenter = true;
        }

        // entry section
        // wait until thread1 wants to enter
        // its critical section

        // critical section

        // exit section
        // indicate thread2 has completed
        // its critical section
        thread2wantstoenter = false;

        // remainder section

    } while (completed == false)
}
</pre></div><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x95EE;&#x9898;&#x662F;&#x65E0;&#x9650;&#x671F;&#x63A8;&#x8FDF;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x800C;&#x4E14;&#xFF0C;&#x968F;&#x673A;&#x65F6;&#x95F4;&#x91CF;&#x4E0D;&#x7A33;&#x5B9A;&#x53D6;&#x51B3;&#x4E8E;&#x5B9E;&#x73B0;&#x7B97;&#x6CD5;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x4E1A;&#x52A1;&#x5173;&#x952E;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E0D;&#x662F;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <strong>Dekker&#x7684;&#x7B97;&#x6CD5;&#xFF1A;&#x6700;&#x7EC8;&#x548C;&#x5B8C;&#x6210;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;</strong> --Idea&#x5C06;&#x4F7F;&#x7528;&#x504F;&#x597D;&#x7684;&#x7EBF;&#x7A0B;&#x6982;&#x5FF5;&#x6765;&#x786E;&#x5B9A;&#x5173;&#x952E;&#x90E8;&#x5206;&#x7684;&#x8FDB;&#x5165;&#x3002;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x4F18;&#x60E0;&#x7EBF;&#x7A0B;&#x5728;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x4EA4;&#x66FF;&#x63D0;&#x4F9B;&#x4E92;&#x65A5;&#x5E76;&#x907F;&#x514D;&#x6B7B;&#x9501;&#xFF0C;&#x65E0;&#x9650;&#x5EF6;&#x8FDF;&#x6216;&#x9501;&#x6B65;&#x540C;&#x6B65;&#x3002;</span> </p><div class="noIdeBtnDiv"><pre class="brush: cpp; title: ; notranslate" title="">Main()
{

    // to denote which thread will enter next
    int favouredthread = 1;

    // flags to indicate if each thread is in
    // queue to enter its critical section
    boolean thread1wantstoenter = false;
    boolean thread2wantstoenter = false;

    startThreads();
}

Thread1()
{
    do {

        thread1wantstoenter = true;

        // entry section
        // wait until thread2 wants to enter
        // its critical section
        while (thread2wantstoenter == true) {

            // if 2nd thread is more favored
            if (favaouredthread == 2) {

                // gives access to other thread
                thread1wantstoenter = false;

                // wait until this thread is favored
                while (favouredthread == 2)
                    ;

                thread1wantstoenter = true;
            }
        }

        // critical section

        // favor the 2nd thread
        favouredthread = 2;

        // exit section
        // indicate thread1 has completed
        // its critical section
        thread1wantstoenter = false;

        // remainder section

    } while (completed == false)
}

Thread2()
{

    do {

        thread2wantstoenter = true;

        // entry section
        // wait until thread1 wants to enter
        // its critical section
        while (thread1wantstoenter == true) {

            // if 1st thread is more favored
            if (favaouredthread == 1) {

                // gives access to other thread
                thread2wantstoenter = false;

                // wait until this thread is favored
                while (favouredthread == 1)
                    ;

                thread2wantstoenter = true;
            }
        }

        // critical section

        // favour the 1st thread
        favouredthread = 1;

        // exit section
        // indicate thread2 has completed
        // its critical section
        thread2wantstoenter = false;

        // remainder section

    } while (completed == false)
}
</pre></div><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()">&#x6B64;&#x7248;&#x672C;&#x4FDD;&#x8BC1;&#x4E86;&#x89E3;&#x51B3;&#x5173;&#x952E;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x95EE;&#x9898;&#x7684;&#x5B8C;&#x6574;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</span> </p><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <b>&#x53C2;&#x8003;&#x6587;&#x732E; - </b></span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <a href="http://garryowen.csisdmz.ul.ie/~cs4023/resources/oth9.pdf" rel="noopener" target="_blank">Dekker&#x7684;&#x7B97;&#x6CD5;-csisdmz.ul.ie</a></span> <br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"> <a href="https://en.wikipedia.org/wiki/Dekker%2527s_algorithm" rel="noopener" target="_blank">Dekker&#x7684;&#x7B97;&#x6CD5; - &#x7EF4;&#x57FA;&#x767E;&#x79D1;</a></span> </p><br><!-- post_bottom_responsive --><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="8385097921" data-ad-format="auto"></ins><br><br><hr><hr><!-- .entry-meta --></div></body></html>