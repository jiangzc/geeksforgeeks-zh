<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title></title>

<link href="../../../styles/ebook.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<header class="entry-header">
						<h1 class="entry-title">Flex (Fast Lexical Analyzer Generator )</h1>
				
						</header>
<!-- .entry-header -->
				<div class="entry-content">
			<p><strong>FLEX (fast lexical analyzer generator)</strong> is a tool/computer program for generating lexical analyzers (scanners or lexers) written by Vern Paxson in C around 1987. It is used together with <a href="https://en.wikipedia.org/wiki/Berkeley_Yacc" target="https://en.wikipedia.org/wiki/Berkeley_Yacc">Berkeley Yacc parser generator</a> or <a href="https://en.wikipedia.org/wiki/GNU_bison">GNU Bison parser generator</a>. Flex and Bison both are more flexible than Lex and Yacc and produces faster code.<br/>
Bison produces parser from the input file provided by the user. The function <b>yylex()</b> is automatically generated by the flex when it is provided with a <b>.l file</b> and this yylex() function is expected by parser to call to retrieve tokens from current/this token stream. </p>
<p><b>Note:</b> The function yylex() is the main flex function which runs the Rule Section and extension (.l) is the extension used to save the programs.</p>
<p><strong>Installing Flex on Ubuntu:</strong></p>
<pre>sudo apt-get update
sudo apt-get install flex
</pre>
<p><b>Note:</b> If Update command is not run on the machine fom a while, it’s better to run it first so that a newer version is installed as an older version might not work with the other packages installed or may not be present now.</p>
<p>Given image describes how the Flex is used:<br/>
<img src="../../../imgs/compiler/f6737141e76c3120193e2b6a08b8809f.jpg" alt="" width="792" height="227" class="alignnone size-full wp-image-336883"/></p>
<p><strong>Step 1:</strong> An input file describes the lexical analyzer to be generated named lex.l is written in lex language. The lex compiler transforms lex.l to C program, in a file that is always named lex.yy.c.<br/>
<strong>Step 2:</strong> The C complier compile lex.yy.c file into an executable file called a.out.<br/>
<strong>Step 3:</strong> The output file a.out take a stream of input characters and produce a stream of tokens. </p>
<p><b>Program Structure:</b><br/>
In the input file, there are 3 sections:<br/>
<b>1. Definition Section:</b> The definition section contains the declaration of variables, regular definitions, manifest constants. In the definition section, text is enclosed in <b>“%{  %}”</b> brackets. Anything written in this brackets is copied directly to the file <b>lex.yy.c</b></p>
<p><b>Syntax:</b>  </p>
<pre>%{
   // Definitions
%}
</pre>
<p><b>2. Rules Section:</b> The rules section contains a series of rules in the form: <i>pattern action</i> and pattern must be unintended and action begin on the same line in {} brackets. The rule section is enclosed in <b>“%% %%”</b>.<br/>
<b>Syntax:</b></p>
<pre>%%
pattern  action
%%
</pre>
<p><b>Examples: Table below shows some of the pattern matches.</b></p>
<table width="100%" style="table-layout:fixed;">
<thead>
<tr>
<th style="padding:8px;background-color:#4CB96B;text-align:center;">Pattern</th>
<th style="padding:8px;background-color:#4CB96B;text-align:center;">It can match with</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">[0-9]</td>
<td style="text-align:center;">all the digits between 0 and 9</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">[0+9]</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">either 0, + or 9</td>
</tr>
<tr>
<td style="text-align:center;">[0, 9]</td>
<td style="text-align:center;">either 0, ‘, ‘ or 9</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">[0 9]</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">either 0, ‘ ‘ or 9</td>
</tr>
<tr>
<td style="text-align:center;">[-09]</td>
<td style="text-align:center;">either -, 0 or 9</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">[-0-9]</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">either – or all digit between 0 and 9</td>
</tr>
<tr>
<td style="text-align:center;">[0-9]+</td>
<td style="text-align:center;">one or more digit between 0 and 9</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">[^a]</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">all the other characters except a</td>
</tr>
<tr>
<td style="text-align:center;">[^A-Z]</td>
<td style="text-align:center;">all the other characters except the upper case letters</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">a{2, 4}</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">either aa, aaa or aaaa</td>
</tr>
<tr>
<td style="text-align:center;">a{2, }</td>
<td style="text-align:center;">two or more occurrences of a</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">a{4}</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">exactly 4 a’s i.e, aaaa</td>
</tr>
<tr>
<td style="text-align:center;">.</td>
<td style="text-align:center;">any character except newline</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">a*</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">0 or more occurrences of a</td>
</tr>
<tr>
<td style="text-align:center;">a+</td>
<td style="text-align:center;">1 or more occurrences of a</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">[a-z]</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">all lower case letters</td>
</tr>
<tr>
<td style="text-align:center;">[a-zA-Z]</td>
<td style="text-align:center;">any alphabetic letter</td>
</tr>
<tr>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">w(x | y)z</td>
<td style="background-color:rgba(183,223,182,0.4);text-align:center;">wxz or wyz</td>
</tr>
</tbody>
</table>
<p><b>3. User Code Section:</b> This section contain C statements and additional functions. We can also compile these functions separately and load with the lexical analyzer.</p>
<p>Basic Program Structure:</p>
<pre>%{
// Definitions
%}

%%
Rules
%%

User code section
</pre>
<p><br/><br/>
<b>How to run the program:</b><br/>
To run the program, it should be first saved with the extension <b>.l or .lex</b>. Run the below commands on terminal in order to run the program file.<br/>
<b>Step 1:</b> lex filename.l or lex filename.lex depending on the extension file is saved with<br/>
<b>Step 2:</b> gcc lex.yy.c<br/>
<b>Step 3:</b> ./a.out<br/>
<b>Step 4:</b> Provide the input to program in case it is required</p>
<p><b>Note:</b> Press <strong>Ctrl+D</strong> or use some <strong>rule</strong> to stop taking inputs from the user. Please see the output images of below programs to clear if in doubt to run the programs.</p>
<p><!-- To show strongly recommend and practice link    --></p>
<div id="practiceLinkDiv">
<h2 class="sigil_not_in_toc"><a href="https://ide.geeksforgeeks.org/">Recommended: Please try your approach on <b><i><u>{IDE}</u></i></b> first, before moving on to the solution.</a></h2>
</div>
<br/>
        
          <!-- post_top_responsive -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="4501693235" data-ad-format="auto"></ins>
          
        <br/>
            
<p><b>Example 1: Count the number of characters in a string</b></p>
<div class="noIdeBtnDiv">
<pre class="brush: c; title: ; notranslate" title="">/*** Definition Section has one variable
which can be accessed inside yylex() 
and main() ***/
%{
int count = 0;
%}

/*** Rule Section has three rules, first rule 
matches with capital letters, second rule
matches with any character except newline and 
third rule does not take input after the enter***/
%%
[A-Z] {printf("%s capital letter\n", yytext);
       count++;}
.     {printf("%s not a capital letter\n", yytext);}
\n    {return 0;}
%%

/*** Code Section prints the number of
capital letter present in the given input***/
int yywrap(){}
int main(){

// Explanation:
// yywrap() - wraps the above rule section
/* yyin - takes the file pointer 
          which contains the input*/
/* yylex() - this is the main flex function
          which runs the Rule Section*/
// yytext is the text in the buffer

// Uncomment the lines below 
// to take input from file
// FILE *fp;
// char filename[50];
// printf("Enter the filename: \n");
// scanf("%s",filename);
// fp = fopen(filename,"r");
// yyin = fp;

yylex();
printf("\nNumber of Captial letters " 
      "in the given input - %d\n", count);

return 0;
}
</pre>
</div>
<p><b>Output:</b><br/>
<img src="../../../imgs/compiler/03de58e2428eb715873abebd25b60507.jpg" alt="" width="497" height="252" class="aligncenter size-full wp-image-336807"/><br/>
<br/><br/>
<b>Example 2: Count the number of characters and number of lines in the input</b></p>
<div class="noIdeBtnDiv">
<pre class="brush: c; title: ; notranslate" title="">/* Decalring two counters one for number 
of lines other for number of characters */
%{
int no_of_lines = 0;
int no_of_chars = 0;
%}

/***rule 1 counts the number of lines, 
rule 2 counts the number of characters 
and rule 3 specifies when to stop 
taking input***/
%%
\n      ++no_of_lines;
.       ++no_of_chars;
end     return 0;
%%

/*** User code section***/
int yywrap(){}
int main(int argc, char **argv)
{

yylex();
printf("number of lines = %d, number of chars = %d\n",
       no_of_lines, no_of_chars );

return 0;
}
</pre>
</div>
<p><b>Output:</b><br/>
<img src="../../../imgs/compiler/bc9c06ab4dbc989a059880f361910f50.jpg" alt="" class="aligncenter"/></p>
<br/>
          <!-- post_bottom_responsive -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9465609616171866" data-ad-slot="8385097921" data-ad-format="auto"></ins>
          
            <br/><br/><hr/>

<hr/>

					
		
<!-- .entry-meta -->	</div>
</body>
</html>